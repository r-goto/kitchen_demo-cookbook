---
driver:
  name: ec2
  some_config: true
  aws_ssh_key_id: r-goto_osaka_rsa
  instance_type: t3.xlarge
  security_group_ids: sg-0b110af304806fd92
  region: ap-northeast-3

transport:
  ssh_key: ~/.ssh/Private_keys/aws-r-goto_osaka_rsa.pem

provisioner:
  name: chef_zero
  product_name: chef
  product_version: 17.9.52

verifier:
  name: inspec

platforms:
  - name: rhel-7
    driver:
      tags: { "Name": "RHEL-7-kitchen", "created_type": "Test Kitchen" ,"Owner": "r-goto"  }
  - name: rhel-8
    driver:
      tags: { "Name": "RHEL-8-kitchen", "created_type": "Test Kitchen" ,"Owner": "r-goto"  }
  # - name: windows-2019
  #   driver:
  #     image_id: ami-031ddc0930004badd
  #     tags: { "Name": "Windows2019-kitchen", "created_type": "Test Kitchen" ,"Owner": "r-goto"  }
  #     security_group_ids: sg-0b1c8da400c042fb7
  #     # interface: public
  #   transport:
  #     username: administrator
  #     password: 
  #     # retryable_sleep: 600
  #     # retryable_tries: 5

suites:
  - name: default
    verifier:
      inspec_tests:
        - test/integration/default
    attributes: { 
      environment: "production",
      chef_client_cron: { minute: "0,15" }
     }

# ---
# driver:  
#   name: dokken
#   chef_version: 17.9.52
#   privileged: true

# transport:
#   name: dokken

# provisioner:
#   name: dokken
#   install_strategy: always
#   chef_license: accept-no-persist

# verifier:
#   name: inspec

# suites:
#   - name: default
#     run_list:
#       - recipe[kitchen_cookbook::default]    
#     verifier:
#       inspec_tests:
#         - test/integration/default
#     attributes: { 
#       environment: "staging",
#       chef_client_cron: { minute: "0,15" }
#      }

# platforms:
# - name: centos-strean-8
#   driver:
#     image: dokken/centos-stream-8
#     pid_one_command: /usr/lib/systemd/systemd
# - name: rockylinux-8
#   driver:
#     image: dokken/rockylinux-8
#     pid_one_command: /usr/lib/systemd/systemd
# - name: ubuntu-22.04
#   driver:
#     image: dokken/ubuntu-22.04
#     pid_one_command: /bin/systemd
# - name: amazonlinux-2022
#   driver:
#     image: dokken/amazonlinux-2022
#     pid_one_command: /usr/lib/systemd/systemd

# ---
# driver:
#   name: vagrant
#   use_cached_chef_client: true
#   ssh:
#     insert_key: false 
#     private_key_path: '~/.vagrant.d/insecure_private_key'
#   customize:
#     memory: 4056
#     cpuexecutioncap: 100

# provisioner:
#   name: chef_zero
#   product_name: chef
#   product_version: 17.9.52

# verifier:
#   name: inspec

# platforms:
#   - name: windows_2019
#     driver:
#       box: tas50/windows_2019
#   - name: centos-7
#   - name: ubuntu-21.10
#   - name: amazonlinux-2
#   - name: almalinux-8.5

# suites:
#   - name: default
#     verifier:
#       inspec_tests:
#         - test/integration/default
#     attributes: { 
#       environment: "production",
#       chef_client_cron: { minute: "0,15" }
#      }
