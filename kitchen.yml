# ---
# driver:  
#   name: dokken
#   chef_version: 17.9.46
#   privileged: true

# transport:
#   name: dokken

# provisioner:
#   name: dokken
#   install_strategy: always
#   chef_license: accept-no-persist

# verifier:
#   name: inspec

# suites:
#   - name: default
#     run_list:
#       - recipe[kitchen_cookbook::default]    
#     verifier:
#       inspec_tests:
#         - test/integration/default
#     attributes: { 
#       environment: "staging",
#       node_setup:  { timezone: 'Europe/Dublin' }
#      }

# platforms:
# - name: centos-strean-8
#   driver:
#     image: dokken/centos-stream-8
#     pid_one_command: /usr/lib/systemd/systemd
# - name: rockylinux-8
#   driver:
#     image: dokken/rockylinux-8
#     pid_one_command: /usr/lib/systemd/systemd
# - name: ubuntu-22.04
#   driver:
#     image: dokken/ubuntu-22.04
#     pid_one_command: /bin/systemd
# - name: amazonlinux-2022
#   driver:
#     image: dokken/amazonlinux-2022
#     pid_one_command: /usr/lib/systemd/systemd

---
driver:
  name: vagrant
  box_check_update: false
  box_auto_update: false
  customize:
    memory: 4056
    cpuexecutioncap: 100
  

provisioner:
  name: chef_zero
  product_name: chef
  product_version: 17.9.46

platforms:
  - name: windows_2019
    driver:
      box: tas50/windows_2019
  # - name: rockylinux-8.5
  # - name: centos-7
  # - name: ubuntu-21.10
  # - name: amazonlinux-2

suites:
  - name: default
    verifier:
      inspec_tests:
        - test/integration/default
    attributes: { 
      environment: "production",
      chef_client_cron: { minute: "0,15" }
     }
